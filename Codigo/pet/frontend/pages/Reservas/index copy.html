<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Minhas Reservas</title>

  <!-- Fonte Bayon do Google Fonts + fallback -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bayon&display=swap" rel="stylesheet">

  <!-- Link para o CSS -->
  <link rel="stylesheet" href="assets/style.css"/>
</head>
<body>
  <!-- Barra lateral -->
  <div class="sidebar">
    <!-- Perfil do usuário -->
    <div class="user-profile">
      <img src="" alt="Foto do usuário" class="profile-image">
      <div class="user-info">
        <h2 class="user-name">Carregando...</h2>
        <p>Tutor</p>
      </div>
    </div>

    <nav>
      <ul>
        <li class="sidebar-item">
          <a href="#" class="sidebar-link" id="editarPerfilBtn">
            <img src="assets/icons/ferramenta-lapis.png" alt="Ícone de lápis" class="menu-icon">
            <span>Editar perfil</span>
          </a>
        </li>
        <li class="divider"></li>
        <li class="sidebar-item">
          <a href="../visualizarPet/index.html" class="sidebar-link" id="gerenciarPetBtn">
            <img src="assets/icons/osso.png" alt="Ícone de osso" class="menu-icon">
            <span>Gerenciar pet</span>
          </a>
        </li>
        <li class="divider"></li>
        <li class="sidebar-item">
          <a href="../BoletimComportamental/lista_boletins.html" class="sidebar-link" id="boletimBtn">
            <img src="assets/icons/documento.png" alt="Ícone de documento" class="menu-icon">
            <span>Boletim</span>
          </a>
        </li>
        <li class="divider"></li>
        <li class="sidebar-item">
          <a href="#" class="sidebar-link active" id="minhasReservasBtn">
            <img src="assets/icons/olho.png" alt="Ícone de olho" class="menu-icon">
            <span>Minhas reservas</span>
          </a>
        </li>
        <li class="divider"></li>
      </ul>
    </nav>
  </div>

  <!-- Conteúdo principal -->
  <div class="main-content">
    <div class="reservas-container">
      <div class="reservas-header">
        <!-- Botão "Adicionar reserva" -->
        <a href="../cadastroReserva/CadastroDeReserva.html" class="add-reserva-btn">+</a>
      </div>

      <!-- Loading indicator -->
      <div id="loadingReservas" class="loading" style="display: none;">
        <p>Carregando reservas...</p>
      </div>

      <!-- Error message -->
      <div id="errorReservas" class="error" style="display: none;">
        <p>Erro ao carregar reservas. Tente novamente mais tarde.</p>
      </div>

      <!-- Empty state -->
      <div id="emptyReservas" class="empty-state" style="display: none;">
        <p>Você ainda não possui reservas. <a href="../cadastroReserva/CadastroDeReserva.html">Clique aqui para criar sua primeira reserva</a>.</p>
      </div>

      <!-- Onde as reservas serão inseridas dinamicamente -->
      <div id="listaReservas"></div>
    </div>
  </div>

  <!-- Modal de Edição -->
  <div id="modalOverlay" class="modal-overlay" style="display: none;"></div>
  <div id="modalEditar" class="modal" style="display: none;">
    <div class="modal-content">
      <span id="fecharModalEditar" class="close-button">&times;</span>
      <h2>Editar Reserva</h2>
      <form id="formEditarReserva">
        <div class="form-group">
          <label for="entradaEdit">Data de Entrada:</label>
          <input type="date" id="entradaEdit" name="entrada" required />
        </div>
        <div class="form-group">
          <label for="saidaEdit">Data de Saída:</label>
          <input type="date" id="saidaEdit" name="saida" required />
        </div>
        <div class="form-group">
          <label for="statusEdit">Status:</label>
          <select id="statusEdit" name="status">
            <option value="Ativa">Ativa</option>
            <option value="Cancelada">Cancelada</option>
            <option value="Finalizada">Finalizada</option>
          </select>
        </div>
        <div class="modal-actions">
          <button type="button" class="cancelar-btn" onclick="closeModal()">Cancelar</button>
          <button type="submit" class="salvar-btn">Salvar Alterações</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Include auth script first -->
  <script src="/js/auth.js"></script>
  <!-- Then the reservation management script -->
  <script src="../../js/gerenciarReservas.js"></script>
  <script>
    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      updateUIForAuthStatus();
    });
  </script>
</body>
</html>